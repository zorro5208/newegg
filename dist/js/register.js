"use strict";$(function(){var a=!1,e=!1,n=!1,l=!1,o=!1;$("#name").click(function(){$(".span2").eq(0).html("用户名以字母开头，不得使用特殊字符，长度为6-20"),$(".span2").eq(0).css("color","#000")}),$("#name").blur(function(){$.ajax({type:"get",url:"../api/checkName.php",data:"uname="+$("#name").val(),success:function(s){if(console.log(s),$("#name").val())if("yes"==s){var e=/^[a-zA-Z][\w\-]{5,19}$/.test($("#name").val());a=e?($(".span2").eq(0).html("用户名验证通过"),$(".span2").eq(0).css("color","#58BC58"),!0):($(".span2").eq(0).html("用户名验证不通过！"),$(".span2").eq(0).css("color","red"),!1)}else $(".span2").eq(0).html("该用户名已被注册！"),$(".span2").eq(0).css("color","red"),a=!1;else $(".span2").eq(0).html("用户名不能为空！"),$(".span2").eq(0).css("color","red"),a=!1}})}),$("#phone").click(function(){$(".span2").eq(1).html("填写正确的手机号码"),$(".span2").eq(1).css("color","#000")}),$("#phone").blur(function(){if($("#phone").val()){var s=/^1[1-9]\d{9}$/.test($("#phone").val());l=s?($(".span2").eq(1).html("手机号码验证通过"),$(".span2").eq(1).css("color","#58BC58"),!0):($(".span2").eq(1).html("手机号码验证不通过！"),$(".span2").eq(1).css("color","red"),!1)}else $(".span2").eq(1).html("手机号码不能为空！"),$(".span2").eq(1).css("color","red"),l=!1}),$.ranCode=function(){html="0987654321zxcvbnmkjhgfdsaqwertyuioplZXCVBNMLKJHGFDSAQWERTYUIOP";for(var s="",e=0;e<5;e++){var a=parseInt(Math.random()*html.length);s+=html[a],$("#num").html(s)}return s},$.ranCode(),$("#num").click(function(){$.ranCode()}),$("#checkNum").blur(function(){if($("#checkNum").val()){var s=$("#num").html(),e=$("#checkNum").val();o=s.toLowerCase()==e.toLowerCase()?($(".span2").eq(2).html("验证码验证通过"),$(".span2").eq(2).css("color","#58BC58"),!0):($(".span2").eq(2).html("验证码验证不通过！"),$(".span2").eq(2).css("color","red"),!1)}else $(".span2").eq(2).html("验证码不能为空！"),$(".span2").eq(2).css("color","red"),o=!1}),$("#gettel").click(function(){a&&l&&o?($(".tel").css("display","block"),$(".span3").css("display","block"),$("#next").css("display","block"),$(this).css("display","none"),$.ajax({type:"post",url:"../api/duanxin.php",data:"userphone="+$("#phone").val(),success:function(s){console.log(s);var e=60,a=setInterval(function(){--e<=0&&(clearInterval(a),$(".span3").css("display","none"),$(".msg").html("点击重新获取"),$(".msg").css("color","red")),$(".span3").html(e+"秒")},1e3)}})):alert("请完善全部信息")}),$("#next").click(function(){var s=$.cookie("randnum");$("#tel").val()==s?($(".pp1").css("background-position-y",-65),$(".tab1").css("display","none"),$(".tab2").css("display","block")):alert("手机验证码错误")}),$("#password").click(function(){$(".span2").eq(4).html("密码最少6位，包括数字，大小写字母，特殊字符"),$(".span2").eq(4).css("color","#000")}),$("#password").blur(function(){if($("#password").val()){var s=/^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*?.]).*$/.test($("#password").val());e=s?($(".span2").eq(4).html("密码验证通过"),$(".span2").eq(4).css("color","#58BC58"),!0):($(".span2").eq(4).html("密码验证不通过！"),$(".span2").eq(4).css("color","red"),!1)}else $(".span2").eq(4).html("密码不能为空！"),$(".span2").eq(4).css("color","red"),e=!1}),$("#repassword").click(function(){$(".span2").eq(5).html("确认密码与密码一致"),$(".span2").eq(5).css("color","#000")}),$("#repassword").blur(function(){if($("#repassword").val()){var s=$("#password").val();console.log(s);var e=$("#repassword").val();n=s==e?($(".span2").eq(5).html("密码验证通过"),$(".span2").eq(5).css("color","#58BC58"),!0):($(".span2").eq(5).html("密码验证不通过！"),$(".span2").eq(5).css("color","red"),!1)}else $(".span2").eq(5).html("密码不能为空！"),$(".span2").eq(5).css("color","red"),n=!1}),$("#register").click(function(){a&&e&&n&&l&&o?$.ajax({type:"post",url:"../api/register.php",data:{uname:$("#name").val(),password:$("#password").val(),phone:$("#phone").val()},async:!0,success:function(s){"yes"==s?window.location.href="login.html?"+$("#name").val():alert("注册失败")}}):alert("请完善信息!")})});